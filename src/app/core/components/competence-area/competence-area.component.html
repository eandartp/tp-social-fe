<div class="container">
  <div class="header">
    {{category.name}}
  </div>
  <div fxLayout="row" fxLayoutAlign="bottom" fxLayoutGap="20px" *ngIf="category.name !== 'Organigramma'">
    <mat-form-field appearance="fill">
      <mat-label>Filtro</mat-label>
      <input matInput (keyup)="doFilter($event)" placeholder="Filtra">
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Ruolo</mat-label>
      <mat-select (selectionChange)="doRoleFilter($event)">
        <mat-divider></mat-divider>
        <mat-option
          *ngFor="let _role of roles"
          [value]="_role"
        >
          {{_role}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Competenza</mat-label>
      <mat-select (selectionChange)="doRoleFilter($event)">
        <mat-divider></mat-divider>
        <mat-option
          *ngFor="let _competence of competences"
          [value]="_competence"
        >
          {{_competence}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="content">
    <mat-card *ngIf="category.name === 'Organigramma'">

      <div class="pdf-header">
        <mat-paginator [length]="totalPages"
                       [pageSize]="1"
                       hidePageSize="true"
                       (page)="change($event)">

        </mat-paginator>
        <button mat-raised-button> download
          <mat-icon>save_alt</mat-icon>
        </button>
      </div>

      <pdf-viewer [src]="'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf'"
                  [show-all]="false"
                  [page]="page"
                  (after-load-complete)="afterLoadComplete($event)"
                  [original-size]="false"
                  [render-text]="true"
                  [zoom]="1/2"
      ></pdf-viewer>
    </mat-card>
    <div *ngIf="category.name !== 'Organigramma'">
      <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataSource">

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Nome</th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>
          <ng-container matColumnDef="surname">
            <th mat-header-cell *matHeaderCellDef> Cognome</th>
            <td mat-cell *matCellDef="let element"> {{element.surname}} </td>
          </ng-container>
          <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef> Ruolo</th>
            <td mat-cell *matCellDef="let element"> {{element.role}} </td>
          </ng-container>
          <ng-container matColumnDef="competence">
            <th mat-header-cell *matHeaderCellDef> Competenze</th>
            <td mat-cell *matCellDef="let element">
              {{getCompetences(element.competence)}}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                       [pageSize]="10"
                       showFirstLastButtons
                       aria-labelledby="pagina"></mat-paginator>
      </div>
    </div>
  </div>
</div>

